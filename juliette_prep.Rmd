---
title: "juliette_prep"
author: "Juliette Verstaen"
date: "7/15/2020"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

List of resources we might want to get together and give people
- themes https://ggplot2.tidyverse.org/reference/ggtheme.html
- data viz book https://serialmentor.com/dataviz/visualizing-associations.html
- https://www.data-to-viz.com/about.html


Workshop:
https://github.com/allisonhorst/palmerpenguins

Looking at the data and seeing what's what
```{r}
#remotes::install_github("allisonhorst/palmerpenguins")

library(palmerpenguins)
library(ggplot2)
library(tidyverse)
data(package = 'palmerpenguins')
```

First things first before making any types of graphs is getting to know your data. For me knowing how many NA's there are and the class of each column/variable is the most important. Not knowing these things up front can cause weird things to happen (or things not to happen) so it's always good to know before hand. It's always best to know the strucutre of your data well enough that you know the general lay out of your plot. This step is skipped a lot beccause there's no real product that comes out of it and it takes a little bit of time. In the end though it's so worth it!

Basic look into the data
```{r}
penguins <- penguins

head(penguins)
summary(penguins) ## take the chance to addess the NA values in each column
```

Talk about the different classes and how they might mess up plotting (numeric/ character, an NA might mess that up; factor vs character)

Exploring classes
```{r}
# long way:
class(penguins$species) ## factor

# short way (would need a brief description of what lapply is..)
lapply(penguins, class)
## im actually not super sure when numeric versus integer comes into play for graphing... anyone?
```

Maybe before we jump right into making graphs we can have like 5ish minutes of people suggesting graphs now that we all know more about the data. For us we could brain strom all the combos we can think of (right and wrong) and reasons for why it would work or not. This might be what we want them to do in the breakout rooms so maybe


Ideas:

- Maybe we want to do one plot showing NA values of a variable, like Allison did in her presentation for the lecturer position. I can't remember exactly how it's done but I do think it's like 1 line of code. We can show it as an option for aesetics as a reminder that sometimes graphs may lead the reader to a misleading conclusion if NA data is removed

- have the end to bring it all together using facet option and people can put their graphs together




```{r}
# defintively have a code chunk where we include NA and then make the conciosu decision to not include it

(penguins_plot <- ggplot(na.omit(penguins)) +
   geom_point(aes(x = body_mass_g, y = flipper_length_mm, color = species, shape = island)) +
   theme_minimal() +
   
   ## Labeling everything
   labs(x = "Body Mass (g)",
        y = "Flipper Length (mm)",
        title = "Exploring Palmer Station Penguins",
        subtitle = "Dimensions and Attributes",
        caption = "Data Source: Dr. Kristen Gorman LTER Palmer Station",
        size = "Bill Length (mm)",
        color = "Species") +
   
   ## Editing the labels aestetics

   theme(plot.title = element_text(color = "black", size = 18, face = "bold", hjust = 0.5),
         plot.subtitle = element_text(color = "gray41", size = 14, face = "bold", hjust = 0.5),
         plot.caption = element_text(color = "gray65", face = "italic"),
         axis.title.x = element_text(size = 15),
         axis.title.y = element_text(size = 15)) +
   
   # change the size of the bill length shapes
  scale_size(breaks = c(30, 35, 40, 45, 50, 55, 60),
             range = c(1, 8)) +
   ## cahnge colors
   scale_colour_manual(values = c("#008A82", "#57280F", "#03304A"), aesthetics = "colour")+
   facet_grid(cols = vars(sex)) 
   
)
```

Can also add: 
- capitilize the male and female labels in the grid but i need to do levels(penguins$sex) <- c("Female", "Male") after doing levels(penguins$sex) to check order
- or  get rid of those titles and put in male or female symbols, can use ggtext thoretically to use picutrees instead https://github.com/wilkelab/ggtext
- add a mean line 


## Bar plot:
- stacked bar plot for each of the three years with total penguins on the y axis and three chunks of colors for the three penguins, also do it by island

```{r}

penguins_sampled <- penguins %>% 
   mutate(island_add = "Island") %>% 
   unite(island_species, c("species", "island"), sep = " on ", remove = FALSE) %>% 
   unite(island_species, c("island_species", "island_add"), sep = " ") %>% 
   mutate(island_species = fct_relevel(island_species, levels = c("Adelie on Biscoe Island", "Gentoo on Biscoe Island", "Adelie on Dream Island", "Chinstrap on Dream Island", "Adelie on Torgersen Island"))) %>% 
   mutate(year = as.character(year))

colors <- c("#B35B91", "#F0C6E7", "#B1611A", "#F5E3C6", "#4EBCD3")


class(penguins_sampled$year)

ggplot(na.omit(penguins_sampled)) +
  stat_count(aes(x=year, fill=island_species), stat="identity", width = 0.6) +
# geom_text(aes(label = 'island'))
   theme_minimal() +
   labs(x = "Year",
        y = "Sample Count",
        title = "Number of Penguins Sampled") + 
   scale_fill_manual(values = colors, aesthetics = "fill") 


```

biscoe (A, G)
dream (s, c)
torgersen (a)

order factor (bis A, bis G, dream s, dream c, torg a)


## scatter with correlation line
- geom point with bill size and weight, correlation line. bring the point home that you should really explore the data. do one with all the penguins and a line, and then one with 3 lines by penguins. will show that one of the penguins just has a smaller bill size and that you can't generalize by all penguins. maybe do one by penguin species and gender
- remember, it can be really easy to make plots and assume because it looks like something is happening or not that that is the case because you can see it! always explore your data and play around with it, and think critically about what what your doing actually means and why


# 008A82, 57280F, 03304A
## do we want to intoduce spcial themes with all the stuffi did above? or too advanced
## I want to capitilize the male and female labels in the grid but i need to do levels(penguins$sex) <- c("Female", "Male") after doing levels(penguins$sex) to check order
## OR I want to get rid of those titles and put in male or female symbols, can use ggtext thoretically to use picutrees instead https://github.com/wilkelab/ggtext


##do we want to remove NAs? or plot them like allison did 

unique(penguins$bill_length_mm)
summary(penguins$bill_length_mm)

 # scale_size(range = c("32.10", "39.23", "44.45", "43.92", "48.50", "59.60")) +



#############


```{r}
library(tidyverse)
remotes::install_github("wilkelab/ggtext")
library(ggtext)
color <- c("#008A82", "#57280F", "#03304A")
name <- c("adelie", "chinstrap", "gentoos")

(penguins_plot <- ggplot(na.omit(penguins)) +
   geom_point(aes(x = body_mass_g, y = flipper_length_mm, size = bill_length_mm, color = species, shape = island)) +
   theme_minimal() +
   
   ## Labeling everything
   labs(x = "Body Mass (g)",
        y = "Flipper Length (mm)",
        title = "Dimensions and attributes for <b style='color:#008A82'>adelie,</b> <b style='color:#57280F'>chinstrap,</b> and <b style='color:#03304A'>gentoos</b>",
        caption = "Data Source: Dr. Kristen Gorman LTER Palmer Station",
        size = "Bill Length (mm)",
        color = "Species") +
   
   ## Editing the labels aestetics
      theme(plot.title = element_markdown(hjust = .3),
         plot.subtitle = element_text(color = "gray41", size = 16, face = "bold", hjust = 0.5),
         plot.caption = element_text(color = "gray65", face = "italic"),
         axis.title.x = element_text(size = 15),
         axis.title.y = element_text(size = 15)) +
   
   
   # change the size of the bill length shapes
  scale_size(breaks = c(30, 35, 40, 45, 50, 55, 60),
             range = c(1, 8)) +
   ## cahnge colors
   scale_colour_manual(values = c("#008A82", "#57280F", "#03304A"), aesthetics = "colour")+
   facet_grid(cols = vars(sex)) 
   
)

```




